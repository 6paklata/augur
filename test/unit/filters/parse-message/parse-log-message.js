/* eslint-env mocha */

"use strict";

var assert = require("chai").assert;
var abi = require("augur-abi");
var abiMap = require("../../../../src/contracts").abi;
var parseLogMessage = require("../../../../src/filters/parse-message/parse-log-message");

describe("filters/parse-message/parse-log-message", function () {
  var test = function (t) {
    it(t.label + ": " + JSON.stringify(t.msg), function (done) {
      var inputs = abiMap.events[t.label].inputs;
      parseLogMessage(t.label, t.msg, inputs, function (parsed) {
        for (var i = 0; i < inputs.length; ++i) {
          assert.property(parsed, inputs[i].name);
          assert.isNotNull(parsed[inputs[i].name]);
        }
        done();
      });
    });
  };
  test({
    label: "MakeOrder",
    msg: [{
      address: "0xd70c6e1f3857d23bd96c3e4d2ec346fa7c3931f3",
      topics: [
        "0x331abc0b32c392f5cdc23a50af9497ab6b82f29ec2274cc33a409e7ab3aedc6c",
        "0xf3efc5085628de2b511a0243bdc9dc7b50ee2440398e626d93280601e3a15634",
        "0x000000000000000000000000d21aa876fe86b0a87f5b6df773d782e1f9bd04df"
      ],
      data: "0000000000000000000000000000000000000000000000000000000000000001",
      blockNumber: "0xc0",
      transactionIndex: "0x0",
      transactionHash: "0x3be9cc70b44bdb25829849f2d2150b5f932b744307ba5b2257e745db6af684de",
      blockHash: "0xf0d3b933c550a39ced64969f856575a3e7876e89288f427d0d876168c9645d3c",
      logIndex: "0x0",
      removed: false
    }]
  });
  test({
    label: "MakeOrder",
    msg: [{
      address: "0xd70c6e1f3857d23bd96c3e4d2ec346fa7c3931f3",
      topics: [
        "0x331abc0b32c392f5cdc23a50af9497ab6b82f29ec2274cc33a409e7ab3aedc6c",
        "0xf3efc5085628de2b511a0243bdc9dc7b50ee2440398e626d93280601e3a15634",
        "0x000000000000000000000000d21aa876fe86b0a87f5b6df773d782e1f9bd04df"
      ],
      data: "0x000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000006f05b59d3b200000000000000000000000000000000000000000000000000001bc16d674ec800000000000000000000000000000000000000000000000000000000000000000002018696fb83c9b609f9b34afc4df42249f2530953fcd019098c70044c9fa1d95400000000000000000000000000000000000000000000000000000000585e00fa",
      blockNumber: "0xc0",
      transactionIndex: "0x0",
      transactionHash: "0x3be9cc70b44bdb25829849f2d2150b5f932b744307ba5b2257e745db6af684de",
      blockHash: "0xf0d3b933c550a39ced64969f856575a3e7876e89288f427d0d876168c9645d3c",
      logIndex: "0x0",
      removed: false
    }]
  });
  test({
    label: "MakeOrder",
    msg: [{
      address: "0x8d28df956673fa4a8bc30cd0b3cb657445bc820e",
      blockHash: "0xf36f8a64964ad218c140d4fe7f35e3ff102a2da044323a58b5eea84a2953a4fb",
      blockNumber: "0x11962d",
      data: "0x0000000000000000000000007c0d52faab596c08f484e3478aebc6205f3f5d8c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000f018ac6a199998f600000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000000000000000000000002c5a915396f55abfa25862758001012dd5d0d73c0036c21b7244ee58499293dd3",
      logIndex: "0x0",
      topics: [
        "0x8dbed7bffe37a9907a92186110f23d8104f5967a71fb059f3b907ca9001fd160",
        "0x912461a845a572a1fff40a3013bfd639c53493d5b89099e0462ca26cc02be35e"
      ],
      transactionHash: "0xe0932645a38d2bbba352d12ecdfa17abc30131da3f04c53db9ae4030ffc8374c",
      transactionIndex: "0x1"
    }]
  });
  test({
    label: "MakeOrder",
    msg: [{
      address: "0x8d28df956673fa4a8bc30cd0b3cb657445bc820e",
      blockHash: "0x0e2f477418a6cc65306a2559a611cafc22d50505b493a1e3674ad9c8076e15e2",
      blockNumber: "0x11963b",
      data: "0x0000000000000000000000007c0d52faab596c08f484e3478aebc6205f3f5d8c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000a3778633199999bd0000000000000000000000000000000000000000000000d70000000000000000000000000000000000000000000000000000000000000000000000000000000233647cb4e21faa8ce19ca0ddb3d0bdaa59dfe2643707f25656a1a8e67890f506",
      logIndex: "0x0",
      topics: [
        "0x8dbed7bffe37a9907a92186110f23d8104f5967a71fb059f3b907ca9001fd160",
        "0x3b19a87dc13d7c9165f444bef3044543c132cbd979f062f2459ef3725633a3f4"
      ],
      transactionHash: "0x409156212bd92eec4273032b5b9c2d6ae8d73eb9169df2b181b78d8a463465a4",
      transactionIndex: "0x0"
    }]
  });
  test({
    label: "MakeOrder",
    msg: [{
      address: "0x8d28df956673fa4a8bc30cd0b3cb657445bc820e",
      blockHash: "0x0e2f477418a6cc65306a2559a611cafc22d50505b493a1e3674ad9c8076e15e2",
      blockNumber: "0x11963b",
      data: "0x0000000000000000000000007c0d52faab596c08f484e3478aebc6205f3f5d8c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000c180cf67650ac995000000000000000000000000000000000000000000000149000000000000000000000000000000000000000000000000000000000000000000000000000000027b95951c2366ae4d1155214a01a9000cb018c9b69cf23343d4c292feb9126514",
      logIndex: "0x1",
      topics: [
        "0x8dbed7bffe37a9907a92186110f23d8104f5967a71fb059f3b907ca9001fd160",
        "0x3b19a87dc13d7c9165f444bef3044543c132cbd979f062f2459ef3725633a3f4"
      ],
      transactionHash: "0x77033aaa1f445b556265d1f9c13265e433121d76adbd5860143f3f0db3e258f6",
      transactionIndex: "0x1"
    }]
  });
  test({
    label: "MakeOrder",
    msg: [{
      address: "0x8d28df956673fa4a8bc30cd0b3cb657445bc820e",
      blockHash: "0x0e2f477418a6cc65306a2559a611cafc22d50505b493a1e3674ad9c8076e15e2",
      blockNumber: "0x11963b",
      data: "0x0000000000000000000000007c0d52faab596c08f484e3478aebc6205f3f5d8c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000df8a189bb07bf96c000000000000000000000000000000000000000000000149000000000000000000000000000000000000000000000000000000000000000000000000000000024eef144a1d15da2a6ad96e36147f3fee70e0ecc3a4f0cbb3932fbd7133809f09",
      logIndex: "0x2",
      topics: [
        "0x8dbed7bffe37a9907a92186110f23d8104f5967a71fb059f3b907ca9001fd160",
        "0x3b19a87dc13d7c9165f444bef3044543c132cbd979f062f2459ef3725633a3f4"
      ],
      transactionHash: "0xe0384041bbc3b637fddc2835841b25d14f893e6cf9866032a13e5fd5068e4ab6",
      transactionIndex: "0x2"
    }]
  });
  test({
    label: "MakeOrder",
    msg: [{
      address: "0x8d28df956673fa4a8bc30cd0b3cb657445bc820e",
      blockHash: "0x8c3fa0f2a092adf52702b8ebda332c12311f32a9d7dbeca3fd7ad3237a1b143a",
      blockNumber: "0x11964c",
      data: "0x000000000000000000000000ae1ba9370f9c3d64894ed9a101079fd17bf1044800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000001d7dd185ffffff8d00000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000002ccb7a4c7d0c9a0de5c08c459ce78642b23fdbd9df707781a9f4c24f9c1205bfd",
      logIndex: "0x1",
      topics: [
        "0x8dbed7bffe37a9907a92186110f23d8104f5967a71fb059f3b907ca9001fd160",
        "0xbbc704ce88ff685a56a6a8e708cec54f981d750d8fe83a53d8c4ffb2d4bf4ddd"
      ],
      transactionHash: "0xa1796f1e7bd1290ba695908a2633a5164deb83c1431c5106c51fb186e79c257e",
      transactionIndex: "0x3"
    }]
  });
  test({
    label: "CancelOrder",
    msg: [{
      address: "0x8d28df956673fa4a8bc30cd0b3cb657445bc820e",
      blockHash: "0x171e8b766a39d5922cdeb45f9f4b3ebfba60d98a4a0b5c1e2dd14fb223fcd595",
      blockNumber: "0x11966f",
      data: "0x0000000000000000000000007c0d52faab596c08f484e3478aebc6205f3f5d8c00000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000010000000000000000c84e2b59c1a8cb678624e582d22e3ac0b4bbed6490900065143bf29b0563e1ee00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002",
      logIndex: "0x0",
      topics: [
        "0x9ecf4903f3efaf1549dc51545bd945f94d51923f37ce198a3b838125a2f397d5",
        "0x467982cbbb0fbb3fc4499f4376aa15795f44a999f32369476f355196f52eeb68"
      ],
      transactionHash: "0xf5a45ffe66c9182545dd6c876d2727dded27ea41369ebee7d1b3c7469e70a99c",
      transactionIndex: "0x2"
    }]
  });
  test({
    label: "TakeOrder",
    msg: [{
      address: "0x13cef2d86d4024f102e480627239359b5cb7bf52",
      blockHash: "0x8171815b23ee1e0cf62e331f283c6d977689a93e3574b2ca35f75c19804914ef",
      blockNumber: "0x11941e",
      data: "0x0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000002386f26fc100000000000000000000000000000000000000000000000000000de0b6b3a7640000640ce61af3b560a54f2f41dcba10ef6337df02e650c30f651789a090b02c312f0000000000000000000000000000000000000000000000000000000000000001",
      logIndex: "0x0",
      topics: [
        "0x715b9a9cb6dfb4fa9cb1ebc2eba40d2a7bd66aa8cef75f87a77d1ff05d29a3b6",
        "0xebb0d4c04bc87d3b401a5baad3b093a5e7cc3f4e996dc53e36db78c8b374cc9a",
        "0x0000000000000000000000007c0d52faab596c08f484e3478aebc6205f3f5d8c",
        "0x00000000000000000000000015f6400a88fb320822b689607d425272bea2175f"
      ],
      transactionHash: "0xf9d3dd428f4d27c6ee14c6a08d877f777bc0365d29fad06ddc0f9dce11dbb9ce",
      transactionIndex: "0x0"
    }]
  });
  test({
    label: "TakeOrder",
    msg: [{
      address: "0x13cef2d86d4024f102e480627239359b5cb7bf52",
      blockHash: "0x0a383bf904a7156d840dbf7ebd0b30ff79dce4950dfa4b5b80bdb619070085d1",
      blockNumber: "0x11964b",
      data: "0x00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000001d7dd185ffffff8d0000000000000000000000000000000000000000000000001d7dd185ffffff8d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002",
      logIndex: "0x1",
      topics: [
        "0x715b9a9cb6dfb4fa9cb1ebc2eba40d2a7bd66aa8cef75f87a77d1ff05d29a3b6",
        "0xbbc704ce88ff685a56a6a8e708cec54f981d750d8fe83a53d8c4ffb2d4bf4ddd",
        "0x000000000000000000000000ae1ba9370f9c3d64894ed9a101079fd17bf10448",
        "0x000000000000000000000000dfb3458ad28f9ce1a6405e8c85daa8c8bdefb24b"
      ],
      transactionHash: "0x6becec25bcb68824ad1904ed3424bdd056055413b96a4195b803c7a1b32b6c1e",
      transactionIndex: "0x2"
    }]
  });
});
